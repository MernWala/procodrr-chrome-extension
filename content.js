(()=>{let e=!1,t=!1;function l(){e=!0,document.removeEventListener("click",l),document.removeEventListener("keydown",l),document.removeEventListener("touchstart",l)}document.addEventListener("click",l),document.addEventListener("keydown",l),document.addEventListener("touchstart",l);class o{constructor(e){this.video=e}Space(e){let t=this.video;e.preventDefault(),t.paused?t.play():t.pause()}ArrowLeft(){document.querySelector(".bmpui-ui-rewindbutton").click()}ArrowRight(){document.querySelector(".bmpui-ui-forwardbutton").click()}ArrowUp(e){let t=this.video;if(e.preventDefault(),t.volume<1){let e=(t.volume+.1).toFixed(1);t.volume=e,localStorage.setItem("volume",e),t.muted=!1}}ArrowDown(e){let t=this.video;if(e.preventDefault(),t.volume>0){let e=(t.volume-.1).toFixed(1);t.volume=e,localStorage.setItem("volume",e),t.muted=!1}else t.muted=!0}BracketLeft(){let e=this.video,t=(e.playbackRate-.1).toFixed(1);t>=0&&(e.playbackRate=t,n.innerText=t+"x",localStorage.setItem("playbackSpeed",e.playbackRate),n.classList.contains("hidden")&&(n.classList.remove("hidden"),setTimeout(()=>{n.classList.add("hidden")},1e3)))}BracketRight(){let e=this.video,t=(e.playbackRate+.1).toFixed(1);t<=16&&(e.playbackRate=t,n.innerText=t+"x",localStorage.setItem("playbackSpeed",e.playbackRate),n.classList.contains("hidden")&&(n.classList.remove("hidden"),setTimeout(()=>{n.classList.add("hidden")},1e3)))}KeyD(e){document.body.classList.add("dark")}KeyL(e){document.body.classList.remove("dark")}KeyI(e){document.querySelector(".bmpui-ui-piptogglebutton").click()}KeyF(){document.querySelector(".bmpui-ui-fullscreentogglebutton").click()}KeyM(){let e=this.video;e.muted=!e.muted}}document.createElement("div").classList.add("btn-container"),window.addEventListener("keydown",e=>{let t=document.querySelector("video");if("Space"===e.code&&e.preventDefault(),!t)return;let l=new o(t);l[e.code]?.(e,t)});let a=null,n=null;new MutationObserver(()=>{let l=document.querySelector("video");if(null!==a&&l===a)return;a=l;let o=document.querySelector(".menu_sidebar:has(li.ant-menu-item)"),c=document.querySelector("#play"),d=document.querySelector(".bitmovinplayer-container");console.log({playerContainer:d}),d&&((n=document.createElement("span")).className="playback-speed hidden",d.append(n)),c&&e&&c?.click(),o&&!t&&(o.addEventListener("click",e=>{if(e.target.closest("li.ant-menu-item")){let e=setInterval(()=>{let t=document.querySelector("#play");t&&t?.click();let l=document.querySelector("video"),o=document.querySelector(".show-v-a-a-images")?.lastChild;(l&&!l.paused||o&&o.className.includes("scaffold"))&&clearInterval(e)},100)}}),t=!0),a&&(a.addEventListener("play",function(){!function(e){let t=localStorage.getItem("playbackSpeed"),l=localStorage.getItem("volume");t&&(e.playbackRate=t,n.innerText=t+"x"),l&&(e.volume=l)}(a)}),a.addEventListener("volumechange",e=>{localStorage.setItem("volume",a.volume)}),a.addEventListener("ratechange",()=>{localStorage.setItem("playbackSpeed",a.playbackRate)}))}).observe(document.getElementById("root"),{childList:!0,subtree:!0})})();